<!doctype html>
<html>
        <head>
                <title>Programmar - Dashboard</title>
                <meta name="viewport" content="width=device-width, initial-scale=1.0">
                <link rel="stylesheet" type="text/css" href="public/styles/main.css">
                <link rel="stylesheet" type="text/css" href="public/styles/dashboard.css">
                <link rel="icon" type="image/svg+xml" href="public/resources/logo.svg">
                <script src="public/scripts/main.js" defer></script>
        </head>
        <body>
                <div class="app-container">
                        <nav class="sidebar">
                                <div class="logo">
                                        <a href="/dashboard" class="logo-link">
                                                <div class="logo-small">
                                                        <?php include 'public/resources/logo.svg'; ?>
                                                </div>
                                                Programmar
                                        </a>
                                </div>

                                <ul class="nav-links">
                                        <li><a href="/dashboard" class="active">Dashboard</a></li>
                                        <li><a href="/my-courses">My Courses</a></li>
                                        <li><a href="/courses">Courses</a></li>
                                        <li><a href="/settings">Settings</a></li>
                                </ul>

                                <div class="sidebar-footer">
                                        <a href="/logout" class="logout-link">
                                                <span>ðŸšª</span> Logout
                                        </a>
                                </div>
                        </nav>

                        <main class="main-content">
                                <header>
                                        <div class="header-text">
                                                <h1>Welcome back, <?= htmlspecialchars($username); ?>!</h1>
                                                <p>Ready to continue your streak?</p>
                                        </div>

                                        <div class="ram-container">
                                                <span class="ram-icon">âš¡</span>
                                                <span class="ram-count"><?= $ram; ?> RAM</span>
                                        </div>
                                </header>

                                <div class="dashboard-hero">
                                        <?php if ($course): ?>
                                                <div class="hero-card">
                                                        <div class="hero-content">
                                                                <h2>Jump back in</h2>
                                                                <h1><?= htmlspecialchars($course['title']); ?></h1>
                                                                <p><?= htmlspecialchars($course['description']); ?></p>

                                                                <div class="hero-stats">
                                                                        <div class="stat-box">
                                                                                <span class="stat-label">Progress</span>
                                                                                <span class="stat-value"><?= $course['progress']; ?>%</span>
                                                                        </div>
                                                                        <div class="stat-box">
                                                                                <span class="stat-label">Lessons</span>
                                                                                <span class="stat-value"><?= $course['completed_lessons']; ?> / <?= $course['total_lessons']; ?></span>
                                                                        </div>
                                                                </div>

                                                                <?php if ($ram > 0): ?>
                                                                        <a href="/lesson?id=<?= $course['id']; ?>" class="btn-large" style="text-decoration:none; display:inline-block; text-align:center;">Continue Learning</a>
                                                                <?php else: ?>
                                                                        <button class="btn-large btn-disabled" disabled>Need RAM to Continue</button>
                                                                <?php endif; ?>
                                                        </div>

                                                        <div class="progress-circle" style="--p:<?= $course['progress']; ?>">
                                                                <div class="circle-inner">
                                                                        <?php
                                                                                $iconMap = ['terminal' => 'ðŸ’»', 'server' => 'âš™ï¸', 'database' => 'ðŸ—„ï¸', 'code' => 'ðŸ“'];
                                                                                echo $iconMap[$course['icon']] ?? 'ðŸ“˜';
                                                                        ?>
                                                                </div>
                                                        </div>
                                                </div>
                                        <?php else: ?>
                                                <div class="empty-state-hero">
                                                        <h2>No active courses</h2>
                                                        <p>Go to the Courses page to start your journey!</p>
                                                        <a href="/courses" class="btn-continue" style="display:inline-block; width:auto;">Browse Courses</a>
                                                </div>
                                        <?php endif; ?>
                                </div>
                        </main>
                </div>
        </body>
</html>
